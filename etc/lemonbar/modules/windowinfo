#!/bin/sh

# Need to import again in case we use it as a standalone script
. $HOME/lib/shell/xrdb_colors
. $HOME/etc/lemonbar/wrappers
wrapper=${MSG_WRAPPER:-debug_wrapper}

ICON="WIN"

herbstclient --idle '(focus_changed|window_title_changed|panel_init)' \
| while read -r window_event; do
    win_active=$(xdotool getactivewindow)
    win_class=$(xprop -id $win_active \
        | grep WM_CLASS \
        | awk '{print $NF}' \
        | tr -d '"' )

    msg="$win_class ($win_active)"
    msg=$($wrapper $ICON $BLUE $msg)
    echo "WININFO$msg"
    sleep $REFRESH_WININFO
done

# vim: set ft=sh:
