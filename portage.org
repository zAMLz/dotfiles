#+TITLE: Portage Pacakge Manager
#+AUTHOR: Amlesh Sivanantham (zamlz)
#+ROAM_KEY: Portage
#+ROAM_ALIAS:
#+ROAM_TAGS: CONFIG SOFTWARE
#+CREATED: [2021-04-12 Mon 12:43]
#+LAST_MODIFIED: [2021-04-14 Wed 11:33:04]

Portage is a source based package manager and official distribution system of [[file:gentoo.org][Gentoo Linux]].

* Portage Environment
:PROPERTIES:
:header-args:shell: :tangle ~/.config/portage/make.conf :mkdirp yes :comments both
:END:

Consult [[file:/usr/share/portage/config/make.conf.example][/usr/share/portage/config/make.conf.example]] for a more detailed example of what can be configured in the =make.conf= file.

** Build Flags

#+begin_src shell
COMMON_FLAGS="-march=native -O2 -pipe"
CFLAGS="${COMMON_FLAGS}"
CXXFLAGS="${COMMON_FLAGS}"
FCFLAGS="${COMMON_FLAGS}"
FFLAGS="${COMMON_FLAGS}"
#+end_src

** System Variables
*** Andromeda

#+begin_src shell :tangle (if (string-equal (system-name) "andromeda") "~/.config/portage/make.conf" "no")
GRUB_PLATFORMS="efi-64"
INPUT_DEVICES="libinput synaptics"
VIDEO_CARDS="nvidia"

# parallel ops
MAKEOPTS="-j18"

# Use app-portage/cpuid2cpuflags to figure out correct cpu flags
CPU=""
CPU="${CPU} aes avx avx2 f16c fma3 mmx mmxext pclmul popcnt sha"
CPU="${CPU} sse sse2 sse3 sse4_1 sse4_2 sse4a ssse3"

CPU_FLAGS_X86="${CPU}"
#+end_src

*** GalaxyPad

#+begin_src shell :tangle (if (string-equal (system-name) "galaxypad") "~/.config/portage/make.conf" "no")
GRUB_PLATFORMS="efi-64"
INPUT_DEVICES="libinput synaptics wacom"
VIDEO_CARDS="nvidia"

# parallel ops
MAKEOPTS="-j10"

# Use app-portage/cpuid2cpuflags to figure out correct cpu flags
CPU=""
CPU="${CPU} aes avx avx2 f16c fma3 mmx mmxext pclmul popcnt"
CPU="${CPU} rdrand sse sse2 sse3 sse4_1 sse4_2 ssse3"

CPU_FLAGS_X86="${CPU}"
#+end_src

** Ebuild and Package Directories

Specify the main repo is stored and where package files are downlaoded.

#+begin_src shell
PORTDIR="/var/db/repos/gentoo"
DISTDIR="/var/cache/distfiles"
PKGDIR="/var/cache/binpkgs"
#+end_src

** Language Localization

Set default language for the build output.

#+begin_src shell
LC_MESSAGES=C
#+end_src

Enable language localization. I just enable all languages.

#+begin_src shell
L10N=""
L10N="${L10N} ach af am an ar as ast az be bg bn bn-BD bn-IN bo br brx bs ca"
L10N="${L10N} ca-valencia cak ceb chr cnr co cs cy da de de-1901 de-CH de-DE"
L10N="${L10N} dgo doi dsb dv dz el en en-AU en-CA en-GB en-NZ en-US en-ZA eo"
L10N="${L10N} es es-419 es-AR es-CL es-ES es-MX es-PE et eu fa ff fi fil fo fr"
L10N="${L10N} fr-CA fy ga gd gl gn gu gug he hi hr hsb ht hu hy ia id io is it"
L10N="${L10N} iu ja jbo jv ka kab kk km kmr-Latn kn ko kok ks ku ky la lb lij"
L10N="${L10N} lo lt lv mai mi mk ml mn mni mr ms mt my nan nb ne nl nn no nr"
L10N="${L10N} nso oc om or pa pl ps pt pt-BR pt-PT qu rm ro ru rw sa sat sc"
L10N="${L10N} sco sd si sid sk sl so son sq sr sr-Latn ss st su sv sw sw-TZ"
L10N="${L10N} syc ta ta-LK te tg th ti tk tl tn to tr ts tt ug uk ur uz ve vi"
L10N="${L10N} xh yi yo zh zh-CN zh-TW zu"
#+end_src

** Repository Mirror List

Setup the repository mirrors list. This isn't really needed I think now that I'm using the github mirror, but it's still useful to have. We can use the following command to get the list of mirrors ordered by ping speed.

#+begin_src shell :tangle no
mirrorselect -s10 -b10 -D -o
#+end_src

#+begin_src shell
GM=""
GM="${GM} http://mirrors.evowise.com/gentoo/"
GM="${GM} https://mirrors.evowise.com/gentoo/"
GM="${GM} http://mirror.leaseweb.com/gentoo/"
GM="${GM} https://mirror.leaseweb.com/gentoo/"
GM="${GM} http://gentoo.mirrors.easynews.com/linux/gentoo/"
GM="${GM} http://gentoo.mirrors.tera-byte.com/"
GM="${GM} http://mirror.csclub.uwaterloo.ca/gentoo-distfiles/"
GM="${GM} http://gentoo.osuosl.org/"
GM="${GM} http://gentoo.mirrors.pair.com/"
GM="${GM} http://mirrors.rit.edu/gentoo/"
GM="${GM} http://gentoo.ussg.indiana.edu/"
GM="${GM} http://www.gtlib.gatech.edu/pub/gentoo"
GM="${GM} https://mirrors.rit.edu/gentoo/"
GM="${GM} http://gentoo.gossamerhost.com"
GM="${GM} https://gentoo.osuosl.org/"
GM="${GM} http://ftp.snt.utwente.nl/pub/os/linux/gentoo"
GM="${GM} http://gentoo.cs.utah.edu/"
GM="${GM} http://ftp.free.fr/mirrors/ftp.gentoo.org/"
GM="${GM} http://mirror.bytemark.co.uk/gentoo/"
GM="${GM} http://www.mirrorservice.org/sites/distfiles.gentoo.org/"
#+end_src

** Global USE Flags

*IMPORTANT:* Essentially during install time, comment out the variables below so that they are incrementally added to avoid build time confusions of any sort. (already ordered too).

#+begin_src shell
USE=""

# Enables Xorg support for any application that supports it
USE="${USE} X xinerama"

# User Session Management (choose one)
USE="${USE} elogind -systemd -consolekit"

# Enable Linux Audio
USE="${USE} alsa pulseaudio"

# Global ZSH completion (enable only after emerging zsh shell)
USE="${USE} zsh-completion"

# Enable Network Management
USE="${USE} networkmanager"

# Specify CUDA version
USE="${USE} -cuda10-1 -cuda10-2 cuda11-0 -cuda11-1"
#+end_src

* Per-Package Environments

Package environments like the ones below allow us to modify the build process for each individual package. This is useful for debugging or forcing portage to install the sources of a particular pacakge. Package Environments can be specified in =/etc/portage/package.env/= directory.

** Debug Symbols (debugsyms)
:PROPERTIES:
:header-args:shell: :tangle ~/.config/portage/env/debugsyms :mkdirp yes :comments both
:END:

#+begin_src shell
CFLAGS="${CFLAGS} -ggdb"
CXXFLAGS="${CXXFLAGS} -ggdb"
FEATURES="${FEATURES} splitdebug compressdebug -nostrip"
#+end_src

** Install Sources (installsources)
:PROPERTIES:
:header-args:shell: :tangle ~/.config/portage/env/installsources :mkdirp yes :comments both
:END:

#+begin_src shell
FEATURES="${FEATURES} installsources"
#+end_src

* Ebuild Repositories
** Main Upstream Repo
:PROPERTIES:
:header-args:conf: :tangle ~/.config/portage/repos.conf/gentoo.conf :mkdirp yes :comments both
:END:

This is a ebuild repository configuration for the Gentoo Mirror. The main reason for using ths repository is that we make use of [[file:git.org][Git]] which is faster than the default rsync. Also make sure that proper security precautions are taken to verify commits. We set the =sync-depth= to 1 so that we only pull the latest HEAD.

#+begin_src conf
[DEFAULT]
main-repo = gentoo

[gentoo]
location = /var/db/repos/gentoo
sync-type = git
sync-uri = https://github.com/gentoo-mirror/gentoo.git
auto-sync = yes
sync-depth = 1
sync-git-verify-commit-signature = true
sync-openpgp-key-path = /usr/share/openpgp-keys/gentoo-release.asc
sync-openpgp-key-refresh-retry-count = 40
sync-openpgp-key-refresh-retry-overall-timeout = 1200
sync-openpgp-key-refresh-retry-delay-exp-base = 2
sync-openpgp-key-refresh-retry-delay-max = 60
sync-openpgp-key-refresh-retry-delay-mult = 4
#+end_src

** Personal Package Repo
:PROPERTIES:
:header-args:conf: :tangle ~/.config/portage/repos.conf/zamlz.conf :mkdirp yes :comments both
:END:

This is my personal package repository. Make sure to clone it locally as well.

#+begin_src conf
[zamlz]
masters = gentoo
location = /home/zamlz/src/gentoo/zamlz
sync-type = git
sync-uri = https://githtub.com/zamlz/portage-overlay.git
auto-sync = yes
sync-openpgp-key-path = /var/lib/gentoo/gkeys/keyrings/gentoo/release/pubring.gpg
#+end_src

** Layman Repositories
:PROPERTIES:
:header-args:conf: :tangle ~/.config/portage/repos.conf/layman.conf :mkdirp yes :comments both
:END:

I'm honestly not sure if I should be putting my layman config here.

#+begin_src conf
[steam-overlay]
priority = 50
location = /var/lib/layman/steam-overlay
layman-type = git
auto-sync = No
#+end_src

* TODO Disentangle this mess
** Package Accept Keywords
:PROPERTIES:
:header-args:conf: :tangle ~/.config/portage/package.accept_keywords/accept_keywords :mkdirp yes :comments both
:END:

#+begin_src conf
# ------------------------------------------------------------------------
#  Personal Accept-Keyworks Changes
# ------------------------------------------------------------------------

app-text/pandoc-bin ~amd64
dev-libs/cudnn ~amd64
dev-util/nvidia-cuda-toolkit ~amd64
media-sound/pulsemixer ~amd64
media-sound/spotify ~amd64
net-im/discord-bin ~amd64
net-im/zoom ~amd64
net-misc/youtube-dl ~amd64
www-client/qutebrowser ~amd64

# ------------------------------------------------------------------------
#  Dependant Accept-Keywords Changes
# ------------------------------------------------------------------------

# required by www-client/qutebrowser-1.14.1::gentoo
# required by qutebrowser (argument)
=dev-python/pygments-2.7.1 ~amd64
=dev-python/pypeg2-2.15.2-r1 ~amd64

# required by games-util/steam-meta-0-r20160817::steam-overlay
# required by games-util/steam-meta (argument)
=games-util/steam-launcher-1.0.0.67 ~amd64

# required by games-util/steam-meta-0-r20160817::steam-overlay
# required by games-util/steam-meta (argument)
=games-util/steam-client-meta-0-r20201118 ~amd64

# required by games-util/steam-meta (argument)
=games-util/steam-meta-0-r20160817 ~amd64

# required by games-util/steam-meta-0-r20160817::steam-overlay[steamruntime]
# required by games-util/steam-meta (argument)
=games-util/steam-games-meta-0-r20191109 ~amd64

# required by games-util/steam-launcher-1.0.0.67::steam-overlay[udev,joystick]
# required by games-util/steam-meta-0-r20160817::steam-overlay
# required by games-util/steam-meta (argument)
=games-util/game-device-udev-rules-20201209 ~amd64

# required by @desktop-env (argument)
=media-fonts/iosevka-1.14.1 ~amd64

# required by games-util/steam-meta-0-r20160817::steam-overlay
# required by games-util/steam-meta (argument)
=media-fonts/steamfonts-1 ~amd64

# required by @apps-web (argument)
=www-plugins/pdfjs-2.4.456 ~amd64

# required by @desktop-env (argument)
=x11-misc/lemonbar-9999 **
=x11-terms/xst-9999 **
#+end_src

** Package License
:PROPERTIES:
:header-args:conf: :tangle ~/.config/portage/package.license/license :mkdirp yes :comments both
:END:

#+begin_src conf
# required by @stack-cuda (argument)
>=dev-libs/cudnn-7.6.5.32-r2 NVIDIA-cuDNN

# required by @stack-cuda (argument)
>=dev-util/nvidia-cuda-toolkit-10.2.89-r2 NVIDIA-CUDA

# required by games-util/steam-meta-0-r20160817::steam-overlay
# required by games-util/steam-meta (argument)
>=games-util/steam-launcher-1.0.0.67 ValveSteamLicense

# required by games-util/steam-client-meta-0-r20201118::steam-overlay[steamfonts]
# required by games-util/steam-meta-0-r20160817::steam-overlay
# required by games-util/steam-meta (argument)
>=media-fonts/steamfonts-1 MSttfEULA

# required by @apps-audio
>=media-sound/spotify-1.1.42 Spotify

# required by @apps-social (argument)
>=net-im/discord-bin-0.0.12 all-rights-reserved
>=net-im/zoom-5.2.458699.0906 all-rights-reserved

# required by sys-kernel/linux-firmware (argument)
>=sys-kernel/linux-firmware-20200817 linux-fw-redistributable no-source-code

# required by x11-base/xorg-drivers-1.20-r2::gentoo[video_cards_nvidia]
# required by x11-base/xorg-server-1.20.8-r1::gentoo[xorg]
# required by x11-drivers/xf86-input-libinput-0.30.0::gentoo
>=x11-drivers/nvidia-drivers-450.66 NVIDIA-r2

# required by @apps-web
# required by @selected
# required by @world (argument)
>=www-client/google-chrome-89.0.4389.128 google-chrome
#+end_src

** Package USE Flags
:PROPERTIES:
:header-args:conf: :tangle ~/.config/portage/package.use/use :mkdirp yes :comments both
:END:

#+begin_src conf
# ------------------------------------------------------------------------
#  Personal USE Flag Changes
# ------------------------------------------------------------------------

app-portage/pfl -network-cron

app-text/zathura-meta cb djvu pdf postscript

dev-qt/qtwebengine jumbo-build

dev-util/nvidia-cuda-toolkit debugger profiler

games-util/steam-client-meta steamfonts

media-fonts/terminus-font distinct-l

media-video/mpv libcaca

net-misc/networkmanager -ppp -modemmanager dhclient

sci-visualization/gnuplot examples latex libcaca

x11-drivers/nvidia-drivers -tools uvm

x11-misc/compton dbus opengl

x11-misc/rofi windowmode

x11-terms/rxvt-unicode 256-color blink fading-colors unicode3 xft

# ------------------------------------------------------------------------
#  Dependant USE Flag Changes
# ------------------------------------------------------------------------

# required by net-im/discord-bin-0.0.12::gentoo
# required by @apps-social (argument)
=app-text/ghostscript-gpl-9.52-r1 cups
=app-text/ghostscript-gpl-9.53.3-r4 cups
=app-text/ghostscript-gpl-9.53.3-r5 cups

# required by app-text/zathura-pdf-poppler-0.2.9::gentoo
# required by app-text/zathura-meta-0::gentoo[pdf]
# required by @document-apps (argument)
=app-text/poppler-0.90.1 cairo
=app-text/poppler-20.11.0 cairo
=app-text/poppler-21.02.0 cairo

# required by kde-apps/okular-20.08.3::gentoo[pdf]
# required by kde-apps/okular (argument)
>=app-text/poppler-20.11.0 qt5

# required by net-im/discord-bin-0.0.12::gentoo
# required by @apps-social (argument)
=app-text/xmlto-0.0.28-r3 text

# required by sys-auth/elogind-243.7::gentoo[policykit]
# required by @system
# required by @world (argument)
=dev-lang/python-2.7.18-r1:2.7 sqlite
=dev-lang/python-2.7.18-r2:2.7 sqlite

# required by www-client/qutebrowser-1.13.1::gentoo
# required by qutebrowser (argument)
=dev-libs/libxml2-2.9.10-r3 icu
=dev-libs/libxml2-2.9.10-r4 icu
=dev-libs/libxml2-2.9.10-r5 icu
=dev-libs/libpcre2-10.35 pcre16 pcre32

# required by app-editors/neovim-0.4.3::gentoo
# required by neovim (argument)
=dev-lua/lpeg-1.0.1 luajit
=dev-lua/luv-1.32.0.0 luajit
=dev-lua/mpack-1.0.4 luajit

# required by www-client/qutebrowser-1.13.1::gentoo
# required by qutebrowser (argument)
=dev-python/PyQt5-5.14.2-r1 printsupport network opengl sql widgets declarative multimedia gui webchannel
=dev-python/PyQt5-5.15.1    opengl sql multimedia printsupport widgets gui network declarative webchannel
=dev-python/PyQt5-5.15.2    multimedia sql opengl widgets gui network declarative printsupport webchannel

# required by media-sound/cadence-0.9.1::gentoo[python_single_target_python3_7]
# required by @apps-audio
=dev-python/PyQt5-5.14.2-r1 svg dbus

# required by kde-apps/okular-20.08.3::gentoo
# required by kde-apps/okular (argument)
=dev-qt/qtcore-5.15.1-r1 icu
=dev-qt/qtcore-5.15.2-r2 icu

# required by kde-apps/okular-20.08.3::gentoo[image-backend]
# required by kde-apps/okular (argument)
=dev-qt/qtgui-5.15.1-r1 jpeg
=dev-qt/qtgui-5.15.2-r1 jpeg

# required by www-client/qutebrowser-1.13.1::gentoo
# required by qutebrowser (argument)
=dev-qt/qtwebengine-5.14.2 widgets
=dev-qt/qtwebengine-5.15.1 widgets
=dev-qt/qtwebengine-5.15.2 widgets
=dev-qt/qtwebengine-5.15.2_p20210224 widgets
=dev-qt/qtwebchannel-5.14.2 qml
=dev-qt/qtwebchannel-5.15.1 qml
=dev-qt/qtwebchannel-5.15.2 qml
=dev-qt/qtmultimedia-5.14.2-r1 widgets
=dev-qt/qtmultimedia-5.15.1 widgets
=dev-qt/qtmultimedia-5.15.2 widgets

# required by x11-libs/cairo-1.16.0-r4::gentoo
# required by app-text/zathura-djvu-0.2.9::gentoo
# required by app-text/zathura-meta-0::gentoo[djvu]
=media-libs/freetype-2.10.4 png

# required by media-gfx/gimp-2.10.18-r1::gentoo
# required by @image-apps (argument)
=media-libs/gegl-0.4.22 cairo
=media-libs/gegl-0.4.24 cairo
=media-libs/gegl-0.4.26-r1 cairo

# required by www-client/qutebrowser-1.13.1::gentoo
# required by qutebrowser (argument)
=media-libs/libvpx-1.7.0-r1 svc
=media-libs/libvpx-1.9.0 svc

# required by kde-apps/okular-20.08.3::gentoo
# required by kde-apps/okular (argument)
=media-video/vlc-3.0.11.1 dbus ogg vorbis
=media-video/vlc-3.0.12.1 dbus ogg vorbis
=media-video/vlc-3.0.12.1-r100 dbus vorbis ogg

# required by media-sound/spotify-1.1.55::gentoo
# required by @apps-audio
# required by @selected
# required by @world (argument)
=net-misc/curl-7.74.0-r2 ssh

# required by net-misc/networkmanager-1.26.0-r1::gentoo[-iwd,wifi]
# required by @world (argument)
=net-wireless/wpa_supplicant-2.9-r2 dbus

# required by sys-boot/os-prober-1.77::gentoo
# required by sys-boot/os-prober (argument)
=sys-boot/grub-2.04-r1 mount
=sys-boot/grub-2.04-r2 mount
=sys-boot/grub-2.06_rc1 mount

# required by www-client/qutebrowser-1.13.1::gentoo
# required by qutebrowser (argument)
=sys-libs/zlib-1.2.11-r2 minizip
=sys-libs/zlib-1.2.11-r3 minizip

# required by app-misc/neofetch-6.0.0::gentoo[X]
# required by @cli-apps (argument)
=www-client/w3m-0.5.3_p20180125 imlib

# ------------------------------------------------------------------------
# 32-bit Support
# ------------------------------------------------------------------------

# required by x11-libs/libXxf86vm-1.1.4-r2::gentoo
# required by media-libs/mesa-20.2.4::gentoo[X]
# required by games-util/steam-games-meta-0-r20191109::steam-overlay
# required by games-util/steam-meta-0-r20160817::steam-overlay[steamruntime]
# required by games-util/steam-meta (argument)
>=x11-libs/libX11-1.7.0 abi_x86_32
# required by x11-libs/libxcb-1.14::gentoo
# required by media-libs/mesa-20.2.4::gentoo[X]
# required by games-util/steam-games-meta-0-r20191109::steam-overlay
# required by games-util/steam-meta-0-r20160817::steam-overlay[steamruntime]
# required by games-util/steam-meta (argument)
>=x11-libs/libXau-1.0.9-r1 abi_x86_32
# required by media-libs/mesa-20.2.4::gentoo[X]
# required by games-util/steam-games-meta-0-r20191109::steam-overlay
# required by games-util/steam-meta-0-r20160817::steam-overlay[steamruntime]
# required by games-util/steam-meta (argument)
>=x11-libs/libxcb-1.14 abi_x86_32
# required by x11-libs/libxcb-1.14::gentoo
# required by media-libs/mesa-20.2.4::gentoo[X]
# required by games-util/steam-games-meta-0-r20191109::steam-overlay
# required by games-util/steam-meta-0-r20160817::steam-overlay[steamruntime]
# required by games-util/steam-meta (argument)
>=x11-libs/libXdmcp-1.1.3 abi_x86_32
# required by x11-libs/libxcb-1.14::gentoo
# required by media-libs/mesa-20.2.4::gentoo[X]
# required by games-util/steam-games-meta-0-r20191109::steam-overlay
# required by games-util/steam-meta-0-r20160817::steam-overlay[steamruntime]
# required by games-util/steam-meta (argument)
>=x11-base/xcb-proto-1.14.1 abi_x86_32
# required by games-util/steam-client-meta-0-r20201118::steam-overlay
# required by games-util/steam-meta-0-r20160817::steam-overlay
# required by games-util/steam-meta (argument)
>=virtual/opengl-7.0-r2 abi_x86_32
# required by virtual/opengl-7.0-r2::gentoo
# required by games-util/steam-client-meta-0-r20201118::steam-overlay
# required by games-util/steam-meta-0-r20160817::steam-overlay
# required by games-util/steam-meta (argument)
>=media-libs/mesa-20.2.4 abi_x86_32
# required by media-libs/mesa-20.2.4::gentoo
# required by games-util/steam-games-meta-0-r20191109::steam-overlay
# required by games-util/steam-meta-0-r20160817::steam-overlay[steamruntime]
# required by games-util/steam-meta (argument)
>=dev-libs/expat-2.2.8 abi_x86_32
# required by media-libs/mesa-20.2.4::gentoo
# required by games-util/steam-games-meta-0-r20191109::steam-overlay
# required by games-util/steam-meta-0-r20160817::steam-overlay[steamruntime]
# required by games-util/steam-meta (argument)
>=media-libs/libglvnd-1.3.2-r2 abi_x86_32
# required by sys-devel/llvm-11.0.0::gentoo
# required by media-libs/mesa-20.2.4::gentoo[gallium,llvm,-video_cards_radeonsi,-opencl,-video_cards_r600,-video_cards_radeon]
# required by games-util/steam-games-meta-0-r20191109::steam-overlay
# required by games-util/steam-meta-0-r20160817::steam-overlay[steamruntime]
# required by games-util/steam-meta (argument)
>=sys-libs/zlib-1.2.11-r2 abi_x86_32
# required by media-libs/mesa-20.2.4::gentoo
# required by games-util/steam-games-meta-0-r20191109::steam-overlay
# required by games-util/steam-meta-0-r20160817::steam-overlay[steamruntime]
# required by games-util/steam-meta (argument)
>=x11-libs/libdrm-2.4.103 abi_x86_32
# required by media-libs/mesa-20.2.4::gentoo[X]
# required by games-util/steam-games-meta-0-r20191109::steam-overlay
# required by games-util/steam-meta-0-r20160817::steam-overlay[steamruntime]
# required by games-util/steam-meta (argument)
>=x11-libs/libxshmfence-1.3-r2 abi_x86_32
# required by media-libs/mesa-20.2.4::gentoo[X]
# required by games-util/steam-games-meta-0-r20191109::steam-overlay
# required by games-util/steam-meta-0-r20160817::steam-overlay[steamruntime]
# required by games-util/steam-meta (argument)
>=x11-libs/libXdamage-1.1.5 abi_x86_32
# required by x11-libs/libXrandr-1.5.2::gentoo
# required by media-libs/mesa-20.2.4::gentoo[X]
# required by games-util/steam-games-meta-0-r20191109::steam-overlay
# required by games-util/steam-meta-0-r20160817::steam-overlay[steamruntime]
# required by games-util/steam-meta (argument)
>=x11-libs/libXext-1.3.4 abi_x86_32
# required by media-libs/mesa-20.2.4::gentoo[X]
# required by games-util/steam-games-meta-0-r20191109::steam-overlay
# required by games-util/steam-meta-0-r20160817::steam-overlay[steamruntime]
# required by games-util/steam-meta (argument)
>=x11-libs/libXxf86vm-1.1.4-r2 abi_x86_32
# required by x11-libs/libXdamage-1.1.5::gentoo
# required by media-libs/mesa-20.2.4::gentoo[X]
# required by games-util/steam-games-meta-0-r20191109::steam-overlay
# required by games-util/steam-meta-0-r20160817::steam-overlay[steamruntime]
# required by games-util/steam-meta (argument)
>=x11-libs/libXfixes-5.0.3-r3 abi_x86_32
# required by media-libs/mesa-20.2.4::gentoo[zstd]
# required by games-util/steam-games-meta-0-r20191109::steam-overlay
# required by games-util/steam-meta-0-r20160817::steam-overlay[steamruntime]
# required by games-util/steam-meta (argument)
>=app-arch/zstd-1.4.5 abi_x86_32
# required by media-libs/mesa-20.2.4::gentoo[gallium,llvm,-video_cards_radeonsi,-opencl,-video_cards_r600,-video_cards_radeon]
# required by games-util/steam-games-meta-0-r20191109::steam-overlay
# required by games-util/steam-meta-0-r20160817::steam-overlay[steamruntime]
# required by games-util/steam-meta (argument)
>=sys-devel/llvm-11.0.0 abi_x86_32
# required by media-libs/mesa-20.2.4::gentoo[X]
# required by games-util/steam-games-meta-0-r20191109::steam-overlay
# required by games-util/steam-meta-0-r20160817::steam-overlay[steamruntime]
# required by games-util/steam-meta (argument)
>=x11-libs/libXrandr-1.5.2 abi_x86_32
# required by x11-libs/libXrandr-1.5.2::gentoo
# required by media-libs/mesa-20.2.4::gentoo[X]
# required by games-util/steam-games-meta-0-r20191109::steam-overlay
# required by games-util/steam-meta-0-r20160817::steam-overlay[steamruntime]
# required by games-util/steam-meta (argument)
>=x11-libs/libXrender-0.9.10-r2 abi_x86_32
# required by sys-devel/llvm-11.0.0::gentoo[libffi]
# required by media-libs/mesa-20.2.4::gentoo[gallium,llvm,-video_cards_radeonsi,-opencl,-video_cards_r600,-video_cards_radeon]
# required by games-util/steam-games-meta-0-r20191109::steam-overlay
# required by games-util/steam-meta-0-r20160817::steam-overlay[steamruntime]
# required by games-util/steam-meta (argument)
>=dev-libs/libffi-3.3-r2 abi_x86_32
# required by sys-devel/llvm-11.0.0::gentoo[ncurses]
# required by media-libs/mesa-20.2.4::gentoo[gallium,llvm,-video_cards_radeonsi,-opencl,-video_cards_r600,-video_cards_radeon]
# required by games-util/steam-games-meta-0-r20191109::steam-overlay
# required by games-util/steam-meta-0-r20160817::steam-overlay[steamruntime]
# required by games-util/steam-meta (argument)
>=sys-libs/ncurses-6.2-r1 abi_x86_32

# required by x11-drivers/nvidia-drivers-455.28-r1::gentoo[X]
# required by games-util/steam-games-meta-0-r20191109::steam-overlay[video_cards_nvidia]
# required by games-util/steam-meta-0-r20160817::steam-overlay[steamruntime]
# required by @selected
# required by @world (argument)
>=x11-libs/libvdpau-1.3 abi_x86_32
#+end_src

** Package Sets
*** Apps Audio
:PROPERTIES:
:header-args:conf: :tangle ~/.config/portage/sets/apps-audio :mkdirp yes :comments both
:END:

#+begin_src conf
media-sound/alsa-utils
media-sound/pulsemixer
media-sound/pavucontrol-qt
media-sound/spotify
#+end_src

*** Apps CLI
:PROPERTIES:
:header-args:conf: :tangle ~/.config/portage/sets/apps-cli :mkdirp yes :comments both
:END:

Main Apps

#+begin_src conf
app-admin/pass
app-arch/zip
app-office/ledger
sys-process/htop
#+end_src

Apps I keep for fun

#+begin_src conf
app-misc/cmatrix
app-misc/figlet
app-misc/neofetch
#+end_src

*** Apps Desktop
:PROPERTIES:
:header-args:conf: :tangle ~/.config/portage/sets/apps-desktop :mkdirp yes :comments both
:END:

Primary Programs

#+begin_src conf
x11-misc/compton
x11-misc/lemonbar
x11-misc/i3lock
x11-misc/rofi
x11-misc/sxhkd
x11-terms/rxvt-unicode
x11-terms/xst
x11-wm/herbstluftwm
#+end_src

Required dependencies for the above programs

#+begin_src conf
media-fonts/dina
media-fonts/fira-code
media-fonts/fontawesome
media-fonts/iosevka
media-fonts/terminus-font
x11-apps/setxkbmap
x11-apps/xbacklight
x11-apps/xprop
x11-apps/xset
x11-apps/xsetroot
x11-misc/xdotool
#+end_src

*** Apps Development
:PROPERTIES:
:header-args:conf: :tangle ~/.config/portage/sets/apps-devel :mkdirp yes :comments both
:END:

Generic Packages

#+begin_src conf
dev-util/ctags
#+end_src

C/C++ Packages

#+begin_src conf
dev-util/valgrind
sys-devel/gdb
#+end_src

Misc programming tools

#+begin_src conf
sci-visualization/gnuplot
#+end_src

*** Apps Documents
:PROPERTIES:
:header-args:conf: :tangle ~/.config/portage/sets/apps-documents :mkdirp yes :comments both
:END:

#+begin_src conf
app-text/pandoc-bin
app-text/mupdf
app-text/zathura
app-text/zathura-meta
kde-apps/okular
#+end_src

*** Apps Gentoo
:PROPERTIES:
:header-args:conf: :tangle ~/.config/portage/sets/apps-gentoo :mkdirp yes :comments both
:END:

#+begin_src conf
app-portage/eix
app-portage/genlop
app-portage/gentoolkit
app-portage/layman
app-portage/metagen
app-portage/mirrorselect
app-portage/pfl
app-portage/repoman
#+end_src

*** Apps Image
:PROPERTIES:
:header-args:conf: :tangle ~/.config/portage/sets/apps-image :mkdirp yes :comments both
:END:

#+begin_src conf
media-gfx/feh
media-gfx/gimp
media-gfx/scrot
#+end_src

*** Apps Social
:PROPERTIES:
:header-args:conf: :tangle ~/.config/portage/sets/apps-social :mkdirp yes :comments both
:END:

#+begin_src conf
net-im/discord-bin
net-im/zoom
#+end_src

*** Apps Video
:PROPERTIES:
:header-args:conf: :tangle ~/.config/portage/sets/apps-video :mkdirp yes :comments both
:END:

#+begin_src conf
media-video/mpv
net-misc/youtube-dl
#+end_src

*** Apps Web
:PROPERTIES:
:header-args:conf: :tangle ~/.config/portage/sets/apps-web :mkdirp yes :comments both
:END:

#+begin_src conf
www-client/firefox-bin
www-client/qutebrowser
www-client/google-chrome
www-plugins/pdfjs
#+end_src

*** Slippi
:PROPERTIES:
:header-args:conf: :tangle ~/.config/portage/sets/slippi :mkdirp yes :comments both
:END:

#+begin_src conf
games-emulation/slippi-bin
#+end_src

*** CUDA Stack
:PROPERTIES:
:header-args:conf: :tangle ~/.config/portage/sets/stack-cuda :mkdirp yes :comments both
:END:

#+begin_src conf
=dev-libs/cudnn-8.0.4.30
=dev-util/nvidia-cuda-toolkit-11.0.3
#+end_src
